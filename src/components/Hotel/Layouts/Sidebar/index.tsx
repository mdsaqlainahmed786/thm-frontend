"use client";

import React, { useEffect, useRef, useState, useMemo } from "react";
import { usePathname } from "next/navigation";
import { useSession } from "next-auth/react";
import Link from "next/link";
import Image from "next/image";
import SidebarItem from "./SidebarItem";
import ClickOutside from "@/components/ClickOutside";
import useLocalStorage from "@/hooks/useLocalStorage";

interface SidebarProps {
  sidebarOpen: boolean;
  setSidebarOpen: (arg: boolean) => void;
}
const getMenuGroups = (businessTypeName?: string) => {
  const isRestaurant = businessTypeName === "Restaurant";
  const isHotel = businessTypeName === "Hotel";

  const bookingLabel = isRestaurant ? "Table Management" : "Booking Management";
  const bookingRoute = isRestaurant
    ? "/hotels/table-management"
    : "/hotels/booking-management";

  const menuItems: any[] = [
    {
      icon: (
        <svg
          className="fill-current"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M21.5 10.9V4.1C21.5 2.6 20.86 2 19.27 2H15.23C13.64 2 13 2.6 13 4.1V10.9C13 12.4 13.64 13 15.23 13H19.27C20.86 13 21.5 12.4 21.5 10.9Z"
            fill=""
          />
          <path
            d="M11 13.1V19.9C11 21.4 10.36 22 8.77 22H4.73C3.14 22 2.5 21.4 2.5 19.9V13.1C2.5 11.6 3.14 11 4.73 11H8.77C10.36 11 11 11.6 11 13.1Z"
            fill=""
          />
          <path
            d="M21.5 19.9V17.1C21.5 15.6 20.86 15 19.27 15H15.23C13.64 15 13 15.6 13 17.1V19.9C13 21.4 13.64 22 15.23 22H19.27C20.86 22 21.5 21.4 21.5 19.9Z"
            fill=""
          />
          <path
            d="M11 6.9V4.1C11 2.6 10.36 2 8.77 2H4.73C3.14 2 2.5 2.6 2.5 4.1V6.9C2.5 8.4 3.14 9 4.73 9H8.77C10.36 9 11 8.4 11 6.9Z"
            fill=""
          />
        </svg>
      ),
      label: "Overview",
      route: "/hotels/overview",
    },
    {
      icon: (
        <svg
          className="fill-current"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            opacity="0.987"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M4.24219 1.19434C9.4297 1.18652 14.6172 1.19434 19.8047 1.21777C20.6777 1.38765 21.1855 1.91108 21.3281 2.78809C21.3594 9.05373 21.3594 15.3193 21.3281 21.585C21.0824 22.7054 20.3871 23.2132 19.2422 23.1084C18.5132 22.8689 17.7945 22.6032 17.0859 22.3115C16.0121 22.1051 15.0121 22.2926 14.0859 22.874C12.9703 23.2997 11.8296 23.3779 10.6641 23.1084C10.029 22.8846 9.40397 22.6346 8.78906 22.3584C8.11706 22.2022 7.4452 22.2022 6.77344 22.3584C6.23184 22.5901 5.68495 22.8089 5.13281 23.0146C4.08131 23.313 3.30788 22.9771 2.8125 22.0068C2.77527 21.8676 2.74402 21.7269 2.71875 21.585C2.6875 15.3037 2.6875 9.02246 2.71875 2.74121C2.89126 1.88905 3.39908 1.37342 4.24219 1.19434ZM7.28906 4.75684C8.01469 4.77024 8.28816 5.12963 8.10938 5.83496C7.60716 6.36577 7.16963 6.3189 6.79688 5.69434C6.70908 5.24452 6.87314 4.93201 7.28906 4.75684ZM9.77344 4.75684C12.0704 4.74901 14.3672 4.75684 16.6641 4.78027C17.1512 4.98165 17.2996 5.33321 17.1094 5.83496C16.9834 6.00812 16.8194 6.12531 16.6172 6.18652C14.3516 6.21779 12.0859 6.21779 9.82031 6.18652C9.28805 5.97362 9.1396 5.60645 9.375 5.08496C9.48825 4.94795 9.6211 4.83854 9.77344 4.75684ZM7.33594 8.74121C10.4297 8.73338 13.5235 8.74121 16.6172 8.76465C17.1995 9.01149 17.3323 9.40993 17.0156 9.95996C16.9098 10.0504 16.7926 10.1207 16.6641 10.1709C13.539 10.2022 10.4141 10.2022 7.28906 10.1709C6.80194 9.96952 6.65353 9.61796 6.84375 9.11621C6.97758 8.94226 7.14164 8.81729 7.33594 8.74121ZM9.96094 12.7256C12.1329 12.7178 14.3048 12.7256 16.4766 12.749C17.0317 12.8356 17.2583 13.1559 17.1563 13.71C17.0343 14.0171 16.8078 14.1812 16.4766 14.2021C14.3047 14.2334 12.1328 14.2334 9.96094 14.2021C9.28374 14.0304 9.10406 13.6319 9.42188 13.0068C9.57694 12.8552 9.75661 12.7614 9.96094 12.7256ZM7.24219 12.7725C8.05149 12.7611 8.32491 13.1361 8.0625 13.8975C7.76949 14.2027 7.43353 14.2573 7.05469 14.0615C6.74949 13.7685 6.69483 13.4326 6.89063 13.0537C6.98972 12.9309 7.10691 12.8371 7.24219 12.7725ZM7.28906 16.7568C10.4141 16.749 13.5391 16.7568 16.6641 16.7803C17.1512 16.9816 17.2996 17.3332 17.1094 17.835C16.9834 18.0081 16.8194 18.1253 16.6172 18.1865C13.5234 18.2178 10.4297 18.2178 7.33594 18.1865C6.78272 17.9647 6.63427 17.5819 6.89063 17.0381C7.01583 16.9255 7.14867 16.8317 7.28906 16.7568Z"
            fill=""
          />
        </svg>
      ),
      label: bookingLabel,
      route: bookingRoute,
    },
  ];

  // Hotel-only
  if (isHotel) {
    menuItems.push(
      {
      icon: (
        <svg
          className="fill-current"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            opacity="0.931"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M11.7912 1.98572C12.0171 1.96341 12.2262 2.0122 12.4186 2.1321C15.5413 3.63772 18.6641 5.14334 21.7868 6.64896C22.0099 6.872 22.0099 7.09508 21.7868 7.31812C21.6614 7.34602 21.5359 7.34602 21.4104 7.31812C18.3156 5.82643 15.2207 4.33477 12.1258 2.84309C12.0143 2.8152 11.9028 2.8152 11.7912 2.84309C8.64564 4.36708 5.495 5.87967 2.33927 7.38086C2.00555 7.31858 1.88705 7.1234 1.98378 6.79534C2.03257 6.74653 2.08136 6.69777 2.13016 6.64896C5.36023 5.10577 8.5806 3.55136 11.7912 1.98572Z"
            fill=""
          />
          <path
            opacity="0.977"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M11.8795 3.5293C11.981 3.53026 12.0785 3.55117 12.1722 3.59203C15.0701 4.99712 17.9698 6.39817 20.8714 7.79522C20.9132 12.0471 20.9271 16.2991 20.9132 20.5512C20.5368 20.5512 20.1604 20.5512 19.784 20.5512C19.7909 17.038 19.784 13.5249 19.7631 10.0118C19.6864 9.76787 19.526 9.60752 19.2821 9.53086C17.2607 9.50296 15.2392 9.50296 13.2178 9.53086C12.9915 9.60376 12.8312 9.75014 12.7368 9.97C12.7159 11.601 12.7089 13.2321 12.7159 14.8633C12.214 14.8633 11.7122 14.8633 11.2103 14.8633C11.2173 13.1206 11.2103 11.378 11.1894 9.63542C11.109 9.37524 10.9347 9.21493 10.6666 9.15446C10.3459 9.12656 10.0253 9.12656 9.70468 9.15446C9.40494 9.23112 9.21673 9.41932 9.14007 9.71906C9.11218 10.9877 9.11218 12.2563 9.14007 13.5249C9.19595 13.7759 9.34233 13.9502 9.57921 14.0477C9.89685 14.1044 10.2175 14.1253 10.5411 14.1105C10.5411 14.3614 10.5411 14.6123 10.5411 14.8633C9.7882 14.8563 9.03539 14.8633 8.28271 14.8842C8.07213 15.0102 8.02332 15.1845 8.13633 15.407C8.33595 15.5198 8.552 15.5616 8.78458 15.5324C8.78458 17.2053 8.78458 18.8782 8.78458 20.5512C8.40817 20.5512 8.03177 20.5512 7.65536 20.5512C7.62663 20.0268 7.36177 19.6852 6.86073 19.5265C6.65208 19.5056 6.44297 19.4986 6.23339 19.5056C6.23339 19.1292 6.23339 18.7528 6.23339 18.3764C7.79108 18.6803 8.34172 18.0808 7.88539 16.578C7.78648 16.4371 7.65403 16.3465 7.48807 16.3061C6.47048 16.2852 5.45279 16.2782 4.43501 16.2852C4.45512 15.2499 4.43421 14.2182 4.37228 13.1904C4.12988 13 3.93471 13.0418 3.78676 13.3158C3.74636 14.7673 3.7603 16.2172 3.82858 17.6654C3.96102 17.9651 4.1771 18.1812 4.47684 18.3136C4.83583 18.3726 5.19829 18.3935 5.56423 18.3764C5.56423 18.7528 5.56423 19.1292 5.56423 19.5056C4.94292 19.4015 4.48984 19.6246 4.20499 20.1747C4.15694 20.2957 4.13603 20.4212 4.14225 20.5512C3.76585 20.5512 3.38944 20.5512 3.01304 20.5512C2.9991 16.2991 3.01304 12.0471 3.05486 7.79522C6.00533 6.38265 8.94685 4.96069 11.8795 3.5293ZM17.2328 15.1978C17.9964 15.2712 18.3658 15.6894 18.3411 16.4525C18.0369 17.2837 17.4862 17.4997 16.6891 17.1008C16.1188 16.516 16.1327 15.9444 16.7309 15.386C16.8953 15.3012 17.0626 15.2385 17.2328 15.1978Z"
            fill=""
          />
          <path
            opacity="0.93"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M9.78613 9.80469C10.0371 9.80469 10.288 9.80469 10.5389 9.80469C10.5389 11.0175 10.5389 12.2304 10.5389 13.4433C10.288 13.4433 10.0371 13.4433 9.78613 13.4433C9.78613 12.2304 9.78613 11.0175 9.78613 9.80469Z"
            fill=""
          />
          <path
            opacity="0.992"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M13.377 10.1836C15.2869 10.1836 17.1968 10.1836 19.1067 10.1836C19.1067 14.1149 19.1067 18.0463 19.1067 21.9776C17.1968 21.9776 15.2869 21.9776 13.377 21.9776C13.377 18.0463 13.377 14.1149 13.377 10.1836ZM17.2246 15.2023C17.0545 15.243 16.8872 15.3057 16.7228 15.3905C16.1246 15.9489 16.1107 16.5205 16.681 17.1053C17.4781 17.5042 18.0288 17.2881 18.3329 16.457C18.3577 15.6939 17.9882 15.2757 17.2246 15.2023Z"
            fill=""
          />
          <path
            opacity="0.98"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M9.44824 15.5332C10.5356 15.5332 11.623 15.5332 12.7104 15.5332C12.7104 17.2061 12.7104 18.879 12.7104 20.5519C11.623 20.5519 10.5356 20.5519 9.44824 20.5519C9.44824 18.879 9.44824 17.2061 9.44824 15.5332Z"
            fill=""
          />
          <path
            opacity="0.868"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M17.2716 15.8691C17.6044 15.9023 17.7368 16.0836 17.6689 16.4128C17.5478 16.6075 17.3736 16.6703 17.1462 16.601C16.9325 16.4603 16.8837 16.2721 16.9998 16.0364C17.0747 15.9474 17.1653 15.8917 17.2716 15.8691Z"
            fill=""
          />
          <path
            opacity="0.925"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M4.42851 16.9551C5.40437 16.9551 6.38025 16.9551 7.3561 16.9551C7.3561 17.206 7.3561 17.457 7.3561 17.7079C6.46377 17.7149 5.57157 17.7079 4.67945 17.687C4.60475 17.6541 4.54202 17.6054 4.49124 17.5406C4.43649 17.3496 4.41558 17.1544 4.42851 16.9551Z"
            fill=""
          />
          <path
            opacity="0.916"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M5.03166 20.1764C5.61735 20.1695 6.20287 20.1764 6.78822 20.1974C6.91636 20.2791 6.98604 20.3976 6.99733 20.5529C6.27242 20.5529 5.54746 20.5529 4.82255 20.5529C4.81721 20.382 4.88692 20.2565 5.03166 20.1764Z"
            fill=""
          />
          <path
            opacity="0.943"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M2.26397 21.2207C5.74919 21.2207 9.23445 21.2207 12.7197 21.2207C12.7197 21.4716 12.7197 21.7226 12.7197 21.9735C9.19258 21.9805 5.66554 21.9735 2.13851 21.9526C1.97845 21.8143 1.92966 21.64 1.99213 21.4298C2.06761 21.3325 2.15823 21.2629 2.26397 21.2207Z"
            fill=""
          />
          <path
            opacity="0.926"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M19.7803 21.2214C20.4078 21.2144 21.0351 21.2214 21.6623 21.2423C21.9387 21.3346 22.0293 21.5228 21.9341 21.8069C21.8853 21.8557 21.8366 21.9045 21.7878 21.9533C21.1187 21.9742 20.4496 21.9812 19.7803 21.9742C19.7803 21.7232 19.7803 21.4723 19.7803 21.2214Z"
            fill=""
          />
        </svg>
      ),
      label: "Room Management",
      route: "/hotels/room-management",
    },
    {
      icon: (
        <svg
          className="fill-current"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M22.2803 6.9692L20.7803 5.4692C20.6396 5.3286 20.4489 5.24961 20.25 5.24961C20.0511 5.24961 19.8604 5.3286 19.7197 5.4692L18.2197 6.9692C18.1481 7.03839 18.091 7.12114 18.0517 7.21265C18.0124 7.30415 17.9917 7.40257 17.9908 7.50215C17.9899 7.60173 18.0089 7.70049 18.0466 7.79267C18.0843 7.88484 18.14 7.96858 18.2105 8.039C18.2809 8.10942 18.3646 8.16511 18.4568 8.20282C18.549 8.24053 18.6477 8.2595 18.7473 8.25864C18.8469 8.25777 18.9453 8.23708 19.0368 8.19778C19.1283 8.15847 19.2111 8.10133 19.2803 8.0297L19.5 7.80995V8.99945C19.5 9.8267 18.8272 10.4995 18 10.4995H16.371L17.871 11.9995H18C19.6545 11.9995 21 10.654 21 8.99945V7.80995L21.2197 8.0297C21.2892 8.09959 21.3719 8.15505 21.4629 8.1929C21.5539 8.23074 21.6514 8.25023 21.75 8.25023C21.8486 8.25023 21.9461 8.23074 22.0371 8.1929C22.1281 8.15505 22.2108 8.09959 22.2803 8.0297C22.4209 7.88905 22.4998 7.69832 22.4998 7.49945C22.4998 7.30058 22.4209 7.10985 22.2803 6.9692ZM21.3105 2.99945L21.5303 2.7797C21.6019 2.71052 21.659 2.62776 21.6983 2.53625C21.7376 2.44475 21.7583 2.34634 21.7592 2.24675C21.7601 2.14717 21.7411 2.04841 21.7034 1.95623C21.6657 1.86406 21.61 1.78032 21.5395 1.7099C21.4691 1.63948 21.3854 1.58379 21.2932 1.54608C21.201 1.50837 21.1023 1.4894 21.0027 1.49026C20.9031 1.49113 20.8047 1.51182 20.7132 1.55112C20.6217 1.59043 20.5389 1.64757 20.4697 1.7192L20.25 1.93895L20.0303 1.7192C19.9611 1.64757 19.8783 1.59043 19.7868 1.55112C19.6953 1.51182 19.5969 1.49113 19.4973 1.49026C19.3977 1.4894 19.299 1.50837 19.2068 1.54608C19.1146 1.58379 19.0309 1.63948 18.9605 1.7099C18.89 1.78032 18.8343 1.86406 18.7966 1.95623C18.7589 2.04841 18.7399 2.14717 18.7408 2.24675C18.7417 2.34634 18.7624 2.44475 18.8017 2.53625C18.841 2.62776 18.8981 2.71052 18.9697 2.7797L19.1895 2.99945L18.9697 3.2192C18.8981 3.28839 18.841 3.37114 18.8017 3.46265C18.7624 3.55415 18.7417 3.65257 18.7408 3.75215C18.7399 3.85173 18.7589 3.95049 18.7966 4.04267C18.8343 4.13484 18.89 4.21858 18.9605 4.289C19.0309 4.35942 19.1146 4.41511 19.2068 4.45282C19.299 4.49053 19.3977 4.5095 19.4973 4.50864C19.5969 4.50777 19.6953 4.48708 19.7868 4.44778C19.8783 4.40847 19.9611 4.35133 20.0303 4.2797L20.25 4.05995L20.4697 4.2797C20.5392 4.34959 20.6219 4.40505 20.7129 4.4429C20.8039 4.48074 20.9014 4.50023 21 4.50023C21.0986 4.50023 21.1961 4.48074 21.2871 4.4429C21.3781 4.40505 21.4608 4.34959 21.5303 4.2797C21.6709 4.13905 21.7498 3.94832 21.7498 3.74945C21.7498 3.55058 21.6709 3.35985 21.5303 3.2192L21.3105 2.99945ZM17.25 2.24945H2.25C2.05109 2.24945 1.86032 2.32847 1.71967 2.46912C1.57902 2.60977 1.5 2.80054 1.5 2.99945C1.5 3.19836 1.57902 3.38913 1.71967 3.52978C1.86032 3.67043 2.05109 3.74945 2.25 3.74945H17.25C17.4489 3.74945 17.6397 3.67043 17.7803 3.52978C17.921 3.38913 18 3.19836 18 2.99945C18 2.80054 17.921 2.60977 17.7803 2.46912C17.6397 2.32847 17.4489 2.24945 17.25 2.24945ZM8.25 14.9995C8.25 17.0672 9.93225 18.7495 12 18.7495C14.0677 18.7495 15.75 17.0672 15.75 14.9995C15.75 12.9317 14.0677 11.2495 12 11.2495C9.93225 11.2495 8.25 12.9317 8.25 14.9995ZM12.375 12.3745V12.4277C13.02 12.5957 13.5 13.1777 13.5 13.8745C13.5 13.9739 13.4605 14.0693 13.3902 14.1396C13.3198 14.2099 13.2245 14.2495 13.125 14.2495C13.0255 14.2495 12.9302 14.2099 12.8598 14.1396C12.7895 14.0693 12.75 13.9739 12.75 13.8745C12.7414 13.6813 12.6586 13.499 12.5189 13.3654C12.3792 13.2318 12.1933 13.1572 12 13.1572C11.8067 13.1572 11.6208 13.2318 11.4811 13.3654C11.3414 13.499 11.2586 13.6813 11.25 13.8745C11.25 14.2877 11.586 14.6245 12 14.6245C12.8273 14.6245 13.5 15.2972 13.5 16.1245C13.5 16.822 13.02 17.4032 12.375 17.5712V17.6245C12.375 17.7239 12.3355 17.8193 12.2652 17.8896C12.1948 17.9599 12.0995 17.9995 12 17.9995C11.9005 17.9995 11.8052 17.9599 11.7348 17.8896C11.6645 17.8193 11.625 17.7239 11.625 17.6245V17.5712C10.98 17.4032 10.5 16.8212 10.5 16.1245C10.5 16.025 10.5395 15.9296 10.6098 15.8593C10.6802 15.789 10.7755 15.7495 10.875 15.7495C10.9745 15.7495 11.0698 15.789 11.1402 15.8593C11.2105 15.9296 11.25 16.025 11.25 16.1245C11.25 16.2728 11.294 16.4178 11.3764 16.5411C11.4588 16.6645 11.5759 16.7606 11.713 16.8174C11.85 16.8741 12.0008 16.889 12.1463 16.86C12.2918 16.8311 12.4254 16.7597 12.5303 16.6548C12.6352 16.5499 12.7066 16.4163 12.7356 16.2708C12.7645 16.1253 12.7497 15.9745 12.6929 15.8374C12.6361 15.7004 12.54 15.5833 12.4167 15.5008C12.2933 15.4184 12.1483 15.3745 12 15.3745C11.1727 15.3745 10.5 14.7017 10.5 13.8745C10.5 13.177 10.98 12.5957 11.625 12.4277V12.3745C11.625 12.275 11.6645 12.1796 11.7348 12.1093C11.8052 12.039 11.9005 11.9995 12 11.9995C12.0995 11.9995 12.1948 12.039 12.2652 12.1093C12.3355 12.1796 12.375 12.275 12.375 12.3745Z"
            fill=""
          />
          <path
            d="M19.2803 14.4697L9.53025 4.71975C9.38963 4.57909 9.1989 4.50004 9 4.5H2.25C2.05109 4.5 1.86032 4.57902 1.71967 4.71967C1.57902 4.86032 1.5 5.05109 1.5 5.25V12C1.50004 12.1989 1.57909 12.3896 1.71975 12.5303L11.4698 22.2803C11.5392 22.3501 11.6219 22.4056 11.7129 22.4434C11.8039 22.4813 11.9014 22.5008 12 22.5008C12.0986 22.5008 12.1961 22.4813 12.2871 22.4434C12.3781 22.4056 12.4608 22.3501 12.5303 22.2803L19.2803 15.5303C19.4209 15.3896 19.4998 15.1989 19.4998 15C19.4998 14.8011 19.4209 14.6104 19.2803 14.4697ZM4.5 9C4.10218 9 3.72064 8.84196 3.43934 8.56066C3.15804 8.27936 3 7.89782 3 7.5C3 7.10218 3.15804 6.72064 3.43934 6.43934C3.72064 6.15804 4.10218 6 4.5 6C4.89782 6 5.27936 6.15804 5.56066 6.43934C5.84196 6.72064 6 7.10218 6 7.5C6 7.89782 5.84196 8.27936 5.56066 8.56066C5.27936 8.84196 4.89782 9 4.5 9ZM12 19.5C9.51825 19.5 7.5 17.4818 7.5 15C7.5 12.5182 9.51825 10.5 12 10.5C14.4818 10.5 16.5 12.5182 16.5 15C16.5 17.4818 14.4818 19.5 12 19.5Z"
            fill=""
          />
        </svg>
      ),
      label: "Price Control",
      route: "/hotels/price-control",
    },
  );
  }

  

  // Common items
  menuItems.push(
   
    {
      icon: (
        <svg
          className="fill-current"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clipPath="url(#clip0_3981_47704)">
            <path
              opacity="0.983"
              fillRule="evenodd"
              clipRule="evenodd"
              d="M23.9766 11.7422C23.9766 11.9141 23.9766 12.0859 23.9766 12.2578C23.0873 13.5307 22.2045 14.8119 21.3281 16.1016C20.9384 16.4723 20.5478 16.4723 20.1562 16.1016C19.2697 14.8128 18.3946 13.5159 17.5312 12.2109C17.4358 11.7848 17.5842 11.4801 17.9766 11.2969C18.2574 11.2735 18.5386 11.2657 18.8203 11.2734C18.4842 8.77397 17.2029 6.93802 14.9766 5.76562C12.1506 4.56744 9.57244 4.95806 7.24219 6.9375C6.74072 7.44619 6.30323 8.00086 5.92969 8.60156C5.58459 8.12367 5.24869 7.63927 4.92188 7.14844C4.44102 6.51342 3.80821 6.20095 3.02344 6.21094C5.15977 3.06517 8.14416 1.44016 11.9766 1.33594C16.4245 1.51545 19.6511 3.57795 21.6562 7.52344C22.1964 8.71552 22.5011 9.96553 22.5703 11.2734C22.8832 11.2657 23.1957 11.2734 23.5078 11.2969C23.7363 11.3771 23.8926 11.5256 23.9766 11.7422Z"
              fill=""
            />
            <path
              opacity="0.983"
              fillRule="evenodd"
              clipRule="evenodd"
              d="M-0.0234375 12.2109C-0.0234375 12.039 -0.0234375 11.8672 -0.0234375 11.6953C0.865795 10.4224 1.74861 9.14119 2.625 7.85156C3.01562 7.47656 3.40625 7.47656 3.79688 7.85156C4.68348 9.14034 5.55848 10.4372 6.42188 11.7422C6.51736 12.1683 6.36895 12.473 5.97656 12.6562C5.69573 12.6796 5.41448 12.6875 5.13281 12.6797C5.46895 15.1792 6.75019 17.0151 8.97656 18.1875C11.8026 19.3857 14.3807 18.9951 16.7109 17.0156C17.2124 16.5069 17.6499 15.9523 18.0234 15.3516C18.3685 15.8295 18.7044 16.3139 19.0312 16.8047C19.5121 17.4397 20.1449 17.7522 20.9297 17.7422C18.7934 20.888 15.809 22.5129 11.9766 22.6172C7.52859 22.4377 4.30202 20.3752 2.29688 16.4297C1.75666 15.2376 1.45198 13.9876 1.38281 12.6797C1.06992 12.6875 0.75742 12.6797 0.445312 12.6562C0.216774 12.576 0.0605236 12.4275 -0.0234375 12.2109Z"
              fill=""
            />
            <path
              opacity="0.963"
              fillRule="evenodd"
              clipRule="evenodd"
              d="M11.7891 7.57031C12.5071 7.57031 12.804 7.92966 12.6797 8.64844C13.6544 8.80289 14.1856 9.37322 14.2734 10.3594C14.2057 10.9485 13.8776 11.1829 13.2891 11.0625C13.1671 11.0211 13.0655 10.9508 12.9844 10.8516C12.8925 10.6583 12.83 10.4552 12.7969 10.2422C12.74 10.1696 12.6697 10.1149 12.5859 10.0781C12.1797 10.0469 11.7735 10.0469 11.3672 10.0781C11.2835 10.1149 11.2132 10.1696 11.1562 10.2422C11.0625 10.5234 11.0625 10.8047 11.1562 11.0859C11.1953 11.125 11.2344 11.1641 11.2734 11.2031C11.8013 11.2625 12.3326 11.2938 12.8672 11.2969C13.5527 11.4511 13.998 11.8651 14.2031 12.5391C14.274 12.9585 14.2897 13.3803 14.25 13.8047C14.0849 14.6808 13.5615 15.1807 12.6797 15.3047C12.7821 16.1165 12.4383 16.4525 11.6484 16.3125C11.4817 16.2238 11.3645 16.091 11.2969 15.9141C11.2735 15.7115 11.2657 15.5084 11.2734 15.3047C10.2988 15.1502 9.76748 14.5799 9.67969 13.5938C9.74737 13.0046 10.0755 12.7702 10.6641 12.8906C10.786 12.932 10.8876 13.0023 10.9688 13.1016C11.0606 13.2948 11.1231 13.4979 11.1562 13.7109C11.2132 13.7835 11.2835 13.8382 11.3672 13.875C11.7735 13.9063 12.1797 13.9063 12.5859 13.875C12.6697 13.8382 12.74 13.7835 12.7969 13.7109C12.8906 13.4297 12.8906 13.1484 12.7969 12.8672C12.7578 12.8281 12.7187 12.789 12.6797 12.75C12.1518 12.6906 11.6205 12.6593 11.0859 12.6562C10.4004 12.502 9.95513 12.088 9.75 11.4141C9.67908 10.9947 9.66347 10.5728 9.70312 10.1484C9.86827 9.27234 10.3917 8.77237 11.2734 8.64844C11.1609 8.13938 11.3328 7.77998 11.7891 7.57031Z"
              fill=""
            />
          </g>
          <defs>
            <clipPath id="clip0_3981_47704">
              <rect width="24" height="24" fill="white" />
            </clipPath>
          </defs>
        </svg>
      ),
      label: "Financial",
      route: "#",
      children: [
        { label: "Bank Detail", route: "/hotels/financial/bank-detail" },
      ],
    },
    {
      icon: (
        <svg
          className="fill-current"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            opacity="0.969"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M11.7896 3.16406C15.318 3.25149 17.904 4.84523 19.5474 7.94531C19.7381 8.35345 19.8865 8.77533 19.9927 9.21094C20.8233 9.18483 21.4717 9.51295 21.938 10.1953C22.8276 11.8238 22.8432 13.4644 21.9849 15.1172C21.6753 15.6455 21.2456 16.044 20.6958 16.3125C20.1123 16.484 19.542 16.4449 18.9849 16.1953C17.838 17.8588 16.2989 18.9916 14.3677 19.5937C14.245 19.6323 14.12 19.6557 13.9927 19.6641C14.044 20.1477 13.8565 20.4992 13.4302 20.7187C12.5416 20.7938 11.651 20.8095 10.7583 20.7656C10.3343 20.701 10.0765 20.4588 9.98488 20.0391C9.92436 19.6636 9.97124 19.3042 10.1255 18.9609C10.2316 18.8235 10.3645 18.7219 10.5239 18.6562C12.2971 18.827 13.969 18.4988 15.5396 17.6719C16.9873 16.802 18.0108 15.5754 18.6099 13.9922C18.7496 13.0452 18.8981 12.0998 19.0552 11.1562C18.7671 8.37 17.3765 6.35437 14.8833 5.10937C11.9215 3.95182 9.27304 4.44401 6.938 6.58594C5.72961 7.85775 5.04993 9.37336 4.89894 11.1328C5.13069 12.5675 5.34946 14.005 5.55519 15.4453C5.54516 15.7865 5.38893 16.0286 5.08644 16.1719C3.73682 16.7272 2.69776 16.3756 1.96925 15.1172C1.19164 13.6065 1.14477 12.0753 1.82863 10.5234C2.30263 9.6968 3.01356 9.25926 3.96144 9.21094C4.61772 6.98405 5.96146 5.30433 7.99269 4.17187C9.19152 3.56095 10.4571 3.22501 11.7896 3.16406Z"
            fill=""
          />
          <path
            opacity="0.983"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M11.9285 5.74219C14.6476 5.84569 16.4991 7.15819 17.4832 9.67969C18.214 12.2982 17.5499 14.4779 15.491 16.2188C13.667 17.4504 11.7217 17.677 9.65511 16.8984C9.10559 17.1693 8.56653 17.4583 8.03792 17.7656C7.61413 17.8576 7.39541 17.6858 7.38167 17.25C7.48297 16.6809 7.60798 16.1184 7.75667 15.5625C6.497 14.1894 5.9892 12.5722 6.23323 10.7109C6.6432 8.33208 7.99475 6.76177 10.2879 6C10.8331 5.85858 11.38 5.77266 11.9285 5.74219ZM8.92855 10.4766C8.64453 10.5368 8.40233 10.6774 8.20198 10.8984C7.86688 11.4632 7.93719 11.971 8.41292 12.4219C9.19573 12.8078 9.75041 12.5968 10.077 11.7891C10.1372 10.9663 9.75439 10.5288 8.92855 10.4766ZM11.8817 10.4766C11.7045 10.5178 11.5326 10.5881 11.366 10.6875C10.8051 11.1929 10.7582 11.7397 11.2254 12.3281C11.8994 12.8054 12.4698 12.7039 12.9364 12.0234C13.1691 11.1148 12.8176 10.5991 11.8817 10.4766ZM14.7879 10.4766C14.5279 10.5325 14.3013 10.6575 14.1082 10.8516C13.6629 11.578 13.8114 12.1483 14.5535 12.5625C15.2199 12.7098 15.6808 12.4676 15.9364 11.8359C16.0218 10.9914 15.639 10.5383 14.7879 10.4766Z"
            fill=""
          />
        </svg>
      ),
      label: "Support",
      route: "/hotels/support",
    },
    {
      icon: (
        <svg
          className="fill-current"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            opacity="0.989"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M10.9453 -0.0234375C11.6328 -0.0234375 12.3203 -0.0234375 13.0078 -0.0234375C17.7097 0.561759 21.0613 2.99926 23.0625 7.28906C23.5452 8.4697 23.8499 9.68845 23.9766 10.9453C23.9766 11.6328 23.9766 12.3203 23.9766 13.0078C23.3915 17.7096 20.954 21.0612 16.6641 23.0625C15.4836 23.5451 14.2648 23.8498 13.0078 23.9766C12.3203 23.9766 11.6328 23.9766 10.9453 23.9766C6.24342 23.3914 2.89186 20.9539 0.890625 16.6641C0.407968 15.4834 0.103281 14.2647 -0.0234375 13.0078C-0.0234375 12.3203 -0.0234375 11.6328 -0.0234375 10.9453C0.561661 6.24352 2.99916 2.89194 7.28906 0.890625C8.46956 0.407997 9.68831 0.103309 10.9453 -0.0234375ZM11.6016 3.58594C13.6524 3.55264 15.0352 4.49014 15.75 6.39844C16.2136 8.60381 15.4402 10.2054 13.4297 11.2031C11.3973 11.833 9.78009 11.2783 8.57812 9.53906C7.64508 7.64498 7.93416 5.96531 9.44531 4.5C10.0858 3.99977 10.8045 3.69509 11.6016 3.58594ZM9.16406 13.4766C11.0391 13.4687 12.9141 13.4766 14.7891 13.5C16.5789 13.821 17.7117 14.8601 18.1875 16.6172C18.4645 17.6776 18.1442 18.498 17.2266 19.0781C14.6438 20.8736 11.8626 21.2643 8.88281 20.25C7.75814 19.833 6.78159 19.2002 5.95312 18.3516C5.64403 17.7849 5.58155 17.1912 5.76562 16.5703C6.27019 14.8388 7.40302 13.8075 9.16406 13.4766Z"
            fill=""
          />
        </svg>
      ),
      label: "Profile",
      route: "/hotels/profile",
    }
  );

  return [
    {
      name: "Menu",
      menuItems,
    },
  ];
};

const Sidebar = ({ sidebarOpen, setSidebarOpen }: SidebarProps) => {
  const pathname = usePathname();
  const [pageName, setPageName] = useLocalStorage("selectedMenu", "dashboard");
  const { data: session } = useSession();
  const businessTypeName = session?.user?.businessTypeName;

  const menuGroups = useMemo(
    () => getMenuGroups(businessTypeName),
    [businessTypeName]
  );

  return (
    <ClickOutside onClick={() => setSidebarOpen(false)}>
      <aside
        className={`fixed left-0 top-0 z-9999 flex h-screen w-72.5 flex-col overflow-y-hidden bg-theme-black duration-300 ease-linear dark:bg-theme-black border-r border-theme-gray lg:translate-x-0 ${
          sidebarOpen ? "translate-x-0" : "-translate-x-full"
        }`}
      >
        {/* <!-- SIDEBAR HEADER --> */}
        <div className="flex items-center justify-between gap-2 px-6 py-5.5 lg:py-6.5">
          <Link href="/">
            <Image
              width={48}
              height={48}
              src={"/images/logo/logo.svg"}
              alt="The Hotel Media Logo"
              priority
            />
          </Link>
          <p>The Hotel Media</p>
          <button
            onClick={() => setSidebarOpen(!sidebarOpen)}
            aria-controls="sidebar"
            className="block lg:hidden"
          >
            <svg
              className="fill-current"
              width="20"
              height="18"
              viewBox="0 0 20 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M19 8.175H2.98748L9.36248 1.6875C9.69998 1.35 9.69998 0.825 9.36248 0.4875C9.02498 0.15 8.49998 0.15 8.16248 0.4875L0.399976 8.3625C0.0624756 8.7 0.0624756 9.225 0.399976 9.5625L8.16248 17.4375C8.31248 17.5875 8.53748 17.7 8.76248 17.7C8.98748 17.7 9.17498 17.625 9.36248 17.475C9.69998 17.1375 9.69998 16.6125 9.36248 16.275L3.02498 9.8625H19C19.45 9.8625 19.825 9.4875 19.825 9.0375C19.825 8.55 19.45 8.175 19 8.175Z"
                fill=""
              />
            </svg>
          </button>
        </div>
        {/* <!-- SIDEBAR HEADER --> */}
        <div className="no-scrollbar flex flex-col overflow-y-auto duration-300 ease-linear">
          {/* <!-- Sidebar Menu --> */}
          <nav className="mt-5 py-4 lg:mt-9 pe-2">
            {menuGroups.map((group, groupIndex) => (
              <div key={groupIndex}>
                <h3 className="mb-4 ml-4 text-sm font-semibold text-bodydark2">
                  {group.name}
                </h3>
                <ul className="mb-6 flex flex-col gap-2">
                  {group.menuItems.map((menuItem, menuIndex) => (
                    <SidebarItem
                      key={menuIndex}
                      item={menuItem}
                      pageName={pageName}
                      setPageName={setPageName}
                    />
                  ))}
                </ul>
              </div>
            ))}
          </nav>
          {/* <!-- Sidebar Menu --> */}
        </div>
      </aside>
    </ClickOutside>
  );
};

export default Sidebar;
